---
title: '#howto - Dimensionamento partizioni Linux'
published: 2019-08-09
layout: post
author: Mirko B.
author_github: mirkobrombin
tags:

---
<p>Quanti di voi avranno giocato con le partizioni di Linux, modificando le loro dimensioni per recuperare spazio e al successivo riavvio il sistema non si è più avviato?</p><p>Per&nbsp; chi si imbattono in questa pratica la prima volta, deve tener conto che ogni partizione&nbsp; ha un suo UUID di riferimento, oggi vedremo come&nbsp; modificare una partizione da modalità LIVE e apportare le variazioni in modo che il Sistema Operativo sia ancora funzionante, senza dover effettuare nessuna nuova Installazione.</p><h2>Preparazione</h2><p>Iniziamo con avviare il sistema operativo da LIVE, con un supporto USB o CD (a voi la scelta) e appena&nbsp; pronto al suo utilizzo, apriamo il terminale.</p><p>Con il comando blkid ,&nbsp; possiamo vedere gli <strong>UUID</strong> delle rispettive partizioni.</p><pre><code>root@mint:/# blkid /dev/sda1: UUID="06959dcc-fc37-42d1-bf8c-115715743fdc" TYPE="ext4" PARTUUID="7515f0ae-01"/dev/sr0: UUID="2019-07-29-11-16-28-00" LABEL="Linux Mint 19.2 Cinnamon 64-bit" TYPE="iso9660" PTUUID="65dbb3bc" PTTYPE="dos"/dev/loop0: TYPE="squashfs"</code></pre><h2>Riduzione Partizione</h2><p>Nel nostro caso, abbiamo la partizione che risiede su /dev/sda1&nbsp; con un UUID="06959dcc-fc37-42d1-bf8c-115715743fdc".&nbsp; Ora&nbsp; aprendo&nbsp; lo strumento di Gestione Dischi (Gparted) andiamo a ridurre la dimensione di questa partizione e ne creeremo una ulteriore. Andate sulla parte alta di Gparted, tasto destro del mouse sul device (/dev/sda1) e selezionate "Resize/Move".</p><img class=" size-full wp-image-526" alt="gp" data-align="center" data-entity-type="file" data-entity-uuid="f1f28d36-5d63-44e3-b90f-7ddd621273f3" src="https://linuxhub.it/wordpress/wp-content/uploads/2019/08/Screenshot-from-2019-08-09-14-32-37.png" width="780" height="531" /><p>Impostate un valore di 'New size' a vostro piacere, ovviamente non potrete ridurre oltre la soglia della parte occupata. Per la nostra guida abbiamo settato il valore a 20000MB.&nbsp; Confermiamo le nostre modifiche su "Resize/Move" e successivamente su 'Apply All Operations". Attendete il completamento.</p><h2>Creazione nuova partizione</h2><p>Sulla spazio non allocato, andremo ora a creare la nuova partizione, tasto destro&nbsp; su 'unallocated' e selezioniamo 'New'</p><img class=" size-full wp-image-527" alt="gparted" data-align="center" data-entity-type="file" data-entity-uuid="2ef5379f-8689-4729-887d-47d8913566ad" src="https://linuxhub.it/wordpress/wp-content/uploads/2019/08/Untitled.png" width="775" height="525" /><p>&nbsp;</p><p>Adesso, stravolgiamo il nostro Sistema Operativo. Creeremo una partizione di boot dedicata. Assegnate una dimensione di circa 4 GB con un TYPE = 'fat32'&nbsp; e un LABEL = 'BOOT' . Successivamente confermiamo e sempre da 'Apply All Operations' applichiamo i cambiamenti. Ovviamente sarete avvisati della possibilità della perdita di dati, ma se siete giunti a questo punto&nbsp; potete correre anche questo rischio!</p><img class=" size-full wp-image-528" alt="boot_1" data-align="center" data-entity-type="file" data-entity-uuid="78e54834-8a7c-4878-875e-2b990ece0831" src="https://linuxhub.it/wordpress/wp-content/uploads/2019/08/boot_1.png" width="779" height="527" /><p>&nbsp;</p><p>Ad attività concluse avremo 2 partizioni, la prima di 20 GB e la seconda di circa 4 GB, la restante è una partizione non formattata. Come abbiamo parlato all'inizio del nostro articolo una partizione ha il suo UUID, la nostra seconda partizione <em>Formattata</em> ha un&nbsp; nuovo UUID, possiamo verificarlo con il comando utilizzato inizialmente:</p><pre><code>root@mint:/# blkid /dev/sda1: UUID="06959dcc-fc37-42d1-bf8c-115715743fdc" TYPE="ext4" PARTUUID="7515f0ae-01"/dev/sr0: UUID="2019-07-29-11-16-28-00" LABEL="Linux Mint 19.2 Cinnamon 64-bit" TYPE="iso9660" PTUUID="65dbb3bc" PTTYPE="dos"/dev/loop0: TYPE="squashfs"/dev/sda2: LABEL="BOOT" UUID="F5E1-31D5" TYPE="vfat" PARTUUID="7515f0ae-02"</code></pre><p>Come possiamo vedere ora abbiamo 2 device <strong>/dev/sda1</strong> e <strong>/dev/sda2</strong> , con i loro relativi UUID.</p><p><strong>Nota Bene:</strong> Una partizione che è solo stata ridimensionata, non cambia di UUID, mentre la <em>Formattazione</em>&nbsp; va ad assegnare un nuovo UUID</p><p>&nbsp;</p><h2>Partizione di Boot</h2><p>Dopo la Formattazione in fat32 ed aver assegnato&nbsp; un LABEL = "BOOT" , faciamo tasto destro sulla nostra piccola partizione e&nbsp; dal menu a tendina&nbsp; selezioniamo "Manage Flag" e assegniamo 'boot'. Applicate le modifiche!</p><img class=" size-full wp-image-529" alt="boot_2" data-align="center" data-entity-type="file" data-entity-uuid="9b264915-78b3-46c4-ba85-f301091362b0" src="https://linuxhub.it/wordpress/wp-content/uploads/2019/08/boot_2.png" width="778" height="526" /><p>Adesso non ci resta che effettuare lo spostamento del path /boot che risiede sul device principale /dev/sda1&nbsp; e lo sposteremo nella sua nuova posizione /dev/sda2,&nbsp; procediamo!</p><pre><code>root@mint:/# # verifica partizioniroot@mint:/# blkid /dev/sda1: UUID="06959dcc-fc37-42d1-bf8c-115715743fdc" TYPE="ext4" PARTUUID="7515f0ae-01"/dev/sr0: UUID="2019-07-29-11-16-28-00" LABEL="Linux Mint 19.2 Cinnamon 64-bit" TYPE="iso9660" PTUUID="65dbb3bc" PTTYPE="dos"/dev/loop0: TYPE="squashfs"/dev/sda2: LABEL="BOOT" UUID="F5E1-31D5" TYPE="vfat" PARTUUID="7515f0ae-02"root@mint:/# root@mint:/# # creazione path temporanei per i 'mount point'root@mint:/# mkdir /tmp/sda1root@mint:/# mkdir /tmp/sda2root@mint:/# root@mint:/# # montaggio partizioniroot@mint:/# mount /dev/sda1 /tmp/sda1root@mint:/# mount /dev/sda2 /tmp/sda2root@mint:/# root@mint:/# # spostamento path di /boot del device /dev/sda1 nel nuovo path /boot del device /dev/sda2root@mint:/# mv /tmp/sda1/boot/ /tmp/sda2/root@mint:/#root@mint:/# # smontiamo le partizioni root@mint:/# umount /tmp/sda*</code></pre><p>Le fasi di mount, sono necessarie perchè un device fisico non è accessibile finché non venga reso visibile al sistema operativo.</p><h2>&nbsp;</h2><h2>Aggiornamento Boot</h2><p>Adesso il nostro sistema operativo principale&nbsp; ha subito delle modifiche che potrebbero aver influito sul corretto avvio. Principalmente quando un Sistema Linux si avvia, ha bisogno di alcuni file&nbsp; che si chiamano rispettivamente grub.cfg e fstab.</p><p>il <strong>grub.cfg</strong>&nbsp; è una parte del boot-loader&nbsp; dove sono riportati i sistemi operativi installati sui device e il loro ordine di avvio, nell'immagine seguente un esempio</p><img class=" size-full wp-image-530" alt="grub" data-align="center" data-entity-type="file" data-entity-uuid="9409f1d2-c628-48fc-9991-bcedd720cd1e" src="https://linuxhub.it/wordpress/wp-content/uploads/2019/08/Screenshot-from-2019-08-09-16-52-13.png" width="639" height="391" /><p>&nbsp;</p><p>Mentre il file <strong>/est/fstab</strong> è dove sono memorizzate le informazioni dei vari device, che verranno montati nei loro path (le cartelle visibili dal gestore file). Ogni sistema operativo Linux ha il suo file fstab.</p><p>Se nel nostro sistema operativo , avessimo trovato diverse partizioni tra cui quella separata&nbsp; con un <em>mount point </em><strong>/boot</strong> , Con il tool boot-repair, potremmo effettuare le modifiche al grub, senza doverci cimentare nell'utilizzo del terminale.&nbsp;Nella presente guida è stato utilizzato un Sistema Operativo Ubuntu Based avviamo in modalità Live , di conseguenza il tool boot-reapir era presente, ma se non dovesse essere presente tra i vostri software&nbsp; è necessario installarlo. Di seguito il comodo comando di APT</p><p>&nbsp;</p><pre><code>sudo apt updatesudo apt install boot-repair</code></pre><p>A seguire avviatelo e procediamo all'aggiornamento del grub. Selezionate "Advance options"&nbsp; e spostatevi nel tab 'GRUB location"</p><p>&nbsp;</p><img class=" size-full wp-image-531" alt="boot2" data-align="center" data-entity-type="file" data-entity-uuid="479e5e94-3652-4b3a-8ca7-546cf084c8a1" src="https://linuxhub.it/wordpress/wp-content/uploads/2019/08/boot2.png" width="392" height="286" /><p>Come potete vedere nella prossima immagine, la scelta della partizione di&nbsp; /boot è quello che stavamo cercando. Il Tool ha&nbsp; trovato che nel device sda</p>