---
title: "#howto - Utilizzo del comando 'crontab'"
published: 2018-05-24
layout: post
author: Mirko B.
author_github: mirkobrombin
tags:
  - bash
---
<!-- wp:paragraph --><p>L'automatizzazione di varie operazioni su una macchina, sono un tassello fondamentale per l'amministrazione di sistemi ma anche per la normale quotidianità "casalinga". Possiamo trarre beneficio dall'automatizzare inviando, ad esempio, report via e-mail sull'utilizzo della memoria della nostra macchina.</p><!-- /wp:paragraph --><!-- wp:heading --><h2>Cosa sono</h2><!-- /wp:heading --><!-- wp:paragraph --><p>I cron non sono altro che delle istruzioni lette ad intervalli temporali regolari dal sistema, cui a loro volta forniscono istruzioni a quest'ultimo, sull'azione da automatizzare in quel preciso intervallo di tempo. Precisamente, nel caso necessitassimo di avviare un processo, in una determinata ora del giorno, ogni giorno, questo sistema ci permetterá di fornire al sistema l'istruzione per farlo.<img class=" size-full wp-image-403" alt="" src="https://linuxhub.it/wordpress/wp-content/uploads/2018/05/cron_mail.png" width="704" height="298" /></p><!-- /wp:paragraph --><!-- wp:image {"id":4774,"align":"center"} --><!-- /wp:image --><!-- wp:heading --><h2>La sintassi</h2><!-- /wp:heading --><!-- wp:paragraph --><p>Un cron é un insieme di istruzioni, come abbiamo giá detto, formato principalmente da 2 elementi:</p><!-- /wp:paragraph --><!-- wp:list --><ul>	<li>fascia temporale</li>	<li>operazione da automatizzare</li></ul><!-- /wp:list --><!-- wp:preformatted --><pre><code class="language-bash">* * * * * echo "Eseguimi ad ogni minuto" &gt;&gt; esempio.log</code></pre><!-- /wp:preformatted --><!-- wp:paragraph --><p>Quello qui sopra é un'esempio di cron che, ad ogni minuto, scrive sul file esempio.log la frase: "Eseguimi ad ogni minuto".</p><!-- /wp:paragraph --><!-- wp:heading {"level":3} --><h3>Le fasi temporali</h3><!-- /wp:heading --><!-- wp:paragraph --><p>Le fasi temporali, sono il lasso di tempo tra un'operazione e l'altra e sono raffigurate da degli asterischi all'inizio dell'istruzione.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>Ci sono cinque campi (nell'esempio precedente sono cinque asterischi), separati da uno spazio, ognuno dei quali accetta un numero, un asterisco o una variabile. I campi specificano, in ordine da sinistra a destra:</p><!-- /wp:paragraph --><!-- wp:list --><ul>	<li>minuti da 0 a 59</li>	<li>ore da 0 a 23</li>	<li>giorno del mese da 1 a 31</li>	<li>mese da 1 a 12</li>	<li>giorno della settimana da 0 (domenica) a 6 (sabato)</li></ul><!-- /wp:list --><!-- wp:paragraph --><p>Per facilitarne l'uso, esistono diverse variabili (variabile - significato):</p><!-- /wp:paragraph --><!-- wp:list --><ul>	<li><code>@hourly</code>&nbsp;-&nbsp;<code>0 * * * *</code></li>	<li><code>@daily</code>&nbsp;-&nbsp;<code>0 0 * * *</code></li>	<li><code>@weekly</code>&nbsp;-&nbsp;<code>0 0 * * 0</code></li>	<li><code>@monthly</code>&nbsp;-&nbsp;<code>0 0 1 * *</code></li>	<li><code>@yearly</code>&nbsp;-&nbsp;<code>0 0 1 1 *</code></li>	<li><code>@reboot</code>&nbsp;- ad ogni riavvio</li></ul><!-- /wp:list --><!-- wp:heading --><h2>Registrare cron</h2><!-- /wp:heading --><!-- wp:paragraph --><p>La registrazione dei cron avviene tramite editor VIM (v):</p><!-- /wp:paragraph --><!-- wp:preformatted --><pre><code class="language-bash">crontab -e</code></pre><!-- /wp:preformatted --><!-- wp:paragraph --><p>digitando il comando qui sopra si aprirá l'editor dove é possibile registrare nuovi cron (uno per riga).</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>Per abilitare la scrittura digitiamo&nbsp;<strong>i</strong> e successivamente aggiungo una riga di prova:</p><!-- /wp:paragraph --><!-- wp:code --><pre><code class="language-bash">@hourly echo "www.linuxhub.it" &gt;&gt; /home/&lt;nostro_username&gt;/test.log</code></pre><!-- /wp:code --><!-- wp:paragraph --><p>una volta terminato, premiamo ESC e successivamente&nbsp;<strong>:wq</strong> per salvare le modifiche. In questo modo il nostro nuovo cron é registrato ed entrerá in funzione ad ogni ora.</p><!-- /wp:paragraph --><!-- wp:heading --><h2>Lista dei cron registrati</h2><!-- /wp:heading --><!-- wp:paragraph --><p>Per mostrare la lista dei cron registrati é opportuno sfruttare la flag&nbsp;<strong>-l</strong> del comando:</p><!-- /wp:paragraph --><!-- wp:preformatted --><pre><code class="language-bash">crontab -l</code></pre><!-- /wp:preformatted --><!-- wp:paragraph --><p>che ci mostrerá il seguente output:</p><!-- /wp:paragraph --><!-- wp:preformatted --><pre><code class="language-bash">0 * * * * echo "www.linuxhub.it" &gt;&gt; /home/&lt;nostro_username&gt;/test.log</code></pre><!-- /wp:preformatted --><!-- wp:heading --><h2>Modificare e disattivare i cron</h2><!-- /wp:heading --><!-- wp:paragraph --><p>Per modificare un cron possiamo ricorrere allo stesso procedimento per registrarli, aprendo con la flag&nbsp;<strong>-e</strong> il file crontab e modificando la riga del cron interessato. Per eliminare/disattivare un cron ci basterá semplicemente eliminare la riga del cron in causa.</p><!-- /wp:paragraph --><!-- wp:heading {"level":3} --><h3>Modificare i cron di altri utenti</h3><!-- /wp:heading --><!-- wp:paragraph --><p>Per modificare un cron, registrato da un terzo utente, possiamo sfruttare la flag&nbsp;<strong>-u</strong> specificando l'username dell'utente usato in fase di registrazione del cron:</p><!-- /wp:paragraph --><!-- wp:code --><pre><code>crontab -u &lt;username&gt; -e</code></pre><!-- /wp:code --><!-- wp:paragraph --><p>e procediamo con lo stesso metodo usato per la registrazione e modifica.</p><!-- /wp:paragraph --><!-- wp:heading {"level":3} --><h3>Eliminare tutti i cron</h3><!-- /wp:heading --><!-- wp:paragraph --><p>Per disattivare in un colpo solo tutti i cron ci basterá digitare:</p><!-- /wp:paragraph --><!-- wp:code --><pre><code>crontab -r</code></pre><!-- /wp:code --><!-- wp:paragraph --><p>Buon divertimento con i cron e ricordate di disattivare il cron registrato nell'esempio.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p><em>Good *nix <strong>_Mirko</strong></em></p><!-- /wp:paragraph -->