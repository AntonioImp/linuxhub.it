---
title: '#howto - Installare Apache su Centos 7'
published: 2019-01-04
layout: post
author: Mirko B.
author_github: mirkobrombin
tags:
  - nginx  - apache
---
<p>Apache è uno dei Web server più famosi ed utilizzati al mondo,&nbsp;in questa guida vediamo come installare e configurare un Web server con Apache su Centos 7.</p><h2>Installazione</h2><p>Per prima cosa procediamo&nbsp;con l'installazione. Come da prassi quindi con <strong>yum</strong>:</p><pre><code>sudo yum -y install httpd</code></pre><p>Per garantire il corretto funzionamento di apache, è buona idea quella di abilitarne l'auto-avvio al riavvio del server, questo via&nbsp;<strong>systemctl</strong>:</p><pre><code>sudo systemctl enable httpd</code></pre><p>in questo modo verrà riavviato ogni qualvolta il server tornerà operativo.</p><h2>Configurazione firewall</h2><p>Nel caso fosse attivo il firewall di sistema, dobbiamo aprire le porte per garantire il corretto entrare/uscire delle connessioni dalle porte&nbsp;<strong>80</strong>&nbsp;e&nbsp;<strong>443</strong>:</p><pre><code>sudo firewall-cmd --permanent --zone=public --add-service=httpsudo firewall-cmd --permanent --zone=public --add-service=httpssudo firewall-cmd --reload</code></pre><h2>Configurazione di Apache</h2><p>Apache come altri Web server, è disponibile&nbsp;una volta installato. È infatti possibile visitare l'indirizzo IP pubblico del server e notare una pagina di test gentilmente offerta da Apache. Ciò nonostante non significa che sia pronto all'uso, per questo motivo andiamo ora a creare una conifugrazione ipotizzando un dominio di prova ossia:&nbsp;<strong>il_mio_dominio.ex</strong>.</p><h3>Struttura locazione</h3><p>Apache viene fornito con una struttura base per il posizionamento dei nostri siti web:</p><pre><code>/var/www/??? il_mio_dominio.ex?   ??? public_html??? il_mio_secondo_dominio.ex?   ??? public_html</code></pre><p>dove:</p><ul>	<li>/var/www - è la locazione principale contenente tutti i nostri siti web</li>	<li>il_mio_dominio.ex - è lo spazio dedicato al nostro sito web</li>	<li>public_html - la cartella dedicata ai file pubblici del sito web, ossia quelli che verranno mostrati e resi raggiungibili dal browser dell'utente</li></ul><p>Per prima cosa andiamo quindi a creare la locazione dove posizionare i dati per il nostro sito web:</p><pre><code>mkdir -p /var/www/il_mio_dominio.ex/public_html</code></pre><p>dove&nbsp;<strong>il_mio_dominio.ex</strong>&nbsp;è il nome della nostra cartella dedicata al dominio il_mio_dominio.ex. Impostiamo ora i permessi corretti:</p><pre><code>sudo chown apache:apache /var/www/il_mio_dominio.ex</code></pre><p>e creiamo un file di prova:</p><pre><code>touch /var/www/il_mio_dominio.ex/index.htmlecho "Buon divertimento da linuxhub.it!" &gt; /var/www/il_mio_dominio.ex/index.html</code></pre><h3>Creazione Virtual host</h3><p>Un Virtual host può essere inteso come un set di istruzioni che istruiscono Apache alla identificazione di un sito web. Di base Apache cerca queste istruzioni in&nbsp;<strong>/etc/httpd/conf.d/</strong>, andiamo quindi a creare il nostro primo virtualhost (o vhost).</p><p>Creiamo il file&nbsp;<strong>/etc/httpd/conf.d/il_mio_dominio.ex.conf</strong>&nbsp;col seguente contenuto:</p><pre><code>&lt;VirtualHost *:80&gt;    ServerName il_mio_dominio.ex    ServerAlias www.il_mio_dominio.ex    ServerAdmin admin@il_mio_dominio.ex    DocumentRoot /var/www/il_mio_dominio.ex/public_html    &lt;Directory /var/www/il_mio_dominio.ex/public_html&gt;        Options -Indexes +FollowSymLinks        AllowOverride All    &lt;/Directory&gt;    ErrorLog /var/log/httpd/il_mio_dominio.ex-error.log    CustomLog /var/log/httpd/il_mio_dominio.ex-access.log combined&lt;/VirtualHost&gt;</code></pre><p>di cui seguono i dettagli:</p><ul>	<li>&lt;VirtualHost&gt; - è il blocco contenente la configurazione del nostro vhost</li>	<li>ServerName - il nostro dominio</li>	<li>ServerAlias - in questo caso serve a far funzionare il nostro dominio col prefisso www</li>	<li>DocumentRoot - la locazione dove sono presenti i file del nosto sito web</li>	<li>&lt;Directory&gt; - è la configurazione di una locazione e fornisci set di istruzioni specifiche per essa</li>	<li>ErrorLog e CustomLog - sono le posizioni dedicate ai file di logging per la fase di debug</li></ul><p>controlliamo la configurazione:</p><pre><code>sudo apachectl configtest</code></pre><p>e riavviamo per completare:</p><pre><code>sudo systemctl restart httpd</code></pre><p>Visitiamo ora il nostro dominio per verificarne il corretto funzionamento.</p><p>In questo modo ogni volta che vogliamo aggiungere un nuovo dominio a nginx, sarà necessario creare un file di configurazione in&nbsp;<strong>/etc/httpd/conf.d/</strong>&nbsp;e la locazione in&nbsp;<strong>/var/www</strong>.</p><p><em>Good&nbsp;<strong>*nix</strong>?</em><br /><em>&nbsp;- Mirko</em></p>