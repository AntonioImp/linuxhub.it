---
title: '#howto - Effettuare il backup di un database MySQL (con mysqldump)'
published: 2019-07-01
layout: post
author: Mirko B.
author_github: mirkobrombin
tags:
  - mysql  
  - bash
---
<p>Sono molte le cirostanze in cui torna utile il backup di un database, ad esempio nella preparazione ad una migrazione o semplicemente per protezione dei dati.</p><p>In questa guida vediamo come è possibile esportare una copia di uno o più database MySQL, tramite <strong>mysqldump</strong>.</p><h2>Preparazione locazione</h2><p>Per prima cosa creiamo una cartella in cui depositare le nostre copie, creiamola ad esempio in /var:</p><pre><code class="language-bash">sudo mkdir -p /var/backup/mysql</code></pre><p>ed impostaimo i permessi corretti:</p><pre><code class="language-bash">sudo chown $(whoami):$(whoami) /var/backup/mysql</code></pre><h2>Creiamo un backup</h2><p>Dopo una breve preparazione, siamo pronti per procedere alla vera e propria operazione di backup. Con dati (username, password, nome database) alla mano, creiamo il seguente comando:</p><pre><code>mysqldump -u USERNAME –pPASSWORD NOME_DATABASE &gt; /var/backup/mysql/NOME_DATABASE.sql</code></pre><p>dove:</p><ul>	<li><strong>USERNAME</strong> è il nome dell'utente che ha accesso al database</li>	<li><strong>PASSWORD </strong>la password dell'utente (non ci sono spazi fra la flag e la password)</li>	<li><strong>NOME_DATABASE</strong> il nome del database che vogliamo esportare</li></ul><p>una volta completato il comando, verrà creata una copia del database nella posizione <strong>/var/backup/mysql</strong>, col nome che abbiamo scelto.</p><h3>Compressione</h3><p>Nel caso di database con grandi quantità di dati, possiamo specificare una compressione, sfruttando la flag <strong>-C</strong>:</p><pre><code>mysqldump -u USERNAME –pPASSWORD -C NOME_DATABASE &gt; /var/backup/mysql/NOME_DATABASE.sql.tgz</code></pre><h2>Backup di tutti i database</h2><p>Nel caso in cui volessimo effettuare il backup di tutti i database (associati allo stesso username), ci basterà procedere sfruttando la flag <strong>--all-databases</strong> come segue:</p><pre><code>mysqldump -u USERNAME –pPASSWORD --all-databases &gt; /var/backup/mysql/DATABASES.sql</code></pre><p>dove <strong>DATABASES</strong> è il nome del backup.</p><p>&nbsp;</p><p><em>Good&nbsp;<strong>*nix</strong>?</em><br /><em>&nbsp;- Mirko</em></p>